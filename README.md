# HeatEquation2D-Group16

## Overview

This project implements and compares different approaches to solving the 2D Heat Equation:

- **Sequential (CPU) implementation**
- **CUDA (GPU) implementations**
- **MPI (Distributed CPU) implementations**
- **Visualization of results using Python**

The goal is to analyze performance and accuracy across these methods.

Below is an example of the resulting animation generated by the visualizer:

![Heat Distribution Animation](heat_distribution.gif)

---

## Directory Structure

- `2D_Heat_Equation_sequential.c` — Sequential CPU implementation
- `2D_Heat_Equation_Jacobi_sequential.c` — Sequential Jacobi method
- `HeatEquation_2DCuda.cu` — CUDA implementation
- `HeatEquation_FDMShared.cu` — CUDA with shared memory
- `HeatEquation2D_JacobiCuda.cu` — CUDA Jacobi method
- `2D_Heat_Equation_MPI_row_split.c` — MPI (row-wise domain decomposition)
- `2D_Heat_Equation_MPI_column_split.c` — MPI (column-wise domain decomposition)
- `visualizer.py` — Python script for visualizing simulation results
- `heat_output.txt` — Output file for simulation data (generated by C/CUDA/MPI codes)

---

## Requirements

### C/CUDA/MPI

- GCC (for C code)
- NVIDIA CUDA Toolkit (for `.cu` files)
- OpenMPI (for MPI codes)
- Make (optional, for easier builds)

### Python (for visualization)

- **You must use [`uv`](https://pypi.org/project/uv/) for Python environment management and dependency installation.**
- Python 3.8+
- ffmpeg (required for animation output)
- See `pyproject.toml` or `requirements.txt` for dependencies.

#### Install `uv`

On Linux/macOS:
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```
Or with pip:
```bash
pip install uv
```

#### Install ffmpeg

> **Note:**  
> The visualization script (`visualizer.py`) **requires `ffmpeg` to be installed on your system** in order to save the animation as an MP4 file.  
>  
> On Ubuntu/Debian, install it with:  
> ```bash
> sudo apt-get install ffmpeg
> ```
>  
> The script will not work for animation output without `ffmpeg`.

#### Set up Python environment and dependencies

```bash
uv venv
uv sync
```

---

## Build Instructions

### 1. Sequential C Code

```bash
gcc -O2 2D_Heat_Equation_sequential.c -o heat_seq
gcc -O2 2D_Heat_Equation_Jacobi_sequential.c -o heat_seq_jacobi
```

### 2. CUDA Code

```bash
nvcc -O2 HeatEquation_2DCuda.cu -o heat_cuda
nvcc -O2 HeatEquation_FDMShared.cu -o heat_cuda_shared
nvcc -O2 HeatEquation2D_JacobiCuda.cu -o heat_cuda_jacobi
```

### 3. MPI Code

```bash
mpicc -O2 2D_Heat_Equation_MPI_row_split.c -o heat_mpi_row
mpicc -O2 2D_Heat_Equation_MPI_column_split.c -o heat_mpi_col
```

---

## Running the Simulations

Each executable will generate a `heat_output.txt` file containing the simulation results.

### Sequential Example

```bash
./heat_seq
```

### CUDA Example

```bash
./heat_cuda
```

### MPI Example (4 processes, row split)

```bash
mpirun -np 4 ./heat_mpi_row
```

> **Note:** You may need to adjust the number of processes (`-np`) and input parameters as required.

---

## Visualizing Results

After running any simulation, ensure `heat_output.txt` is present in the project directory.

**You must have `ffmpeg` installed on your system for animation output.**

Run the visualizer:

```bash
uv run python visualizer.py
```

This will:

- Load `heat_output.txt`
- Animate the heat distribution over time
- Save the animation as `heat_distribution.mp4`
- Optionally, save individual frames in `output_frames/`

---

## Output File Format

All C/CUDA/MPI codes write results to `heat_output.txt` in a format compatible with `visualizer.py`. The file should contain a flattened array of temperature values for each time step.

---

## Notes

- For best performance, use a machine with an NVIDIA GPU for CUDA codes and a multi-core/multi-node system for MPI codes.
- Compare the generated `heat_distribution.mp4` files to analyze differences in accuracy and performance between methods.

---

## References

- [CUDA Toolkit Documentation](https://docs.nvidia.com/cuda/)
- [OpenMPI Documentation](https://www.open-mpi.org/doc/)
- [Matplotlib Animation](https://matplotlib.org/stable/api/animation_api.html)
- [uv Documentation](https://docs.astral.sh/uv/)

---

## Authors

Group 16 — 2D Heat Equation Project
